(function(n){"use strict";typeof define=="function"&&define.amd?define("jstree",["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)})(function(n,t){"use strict";
/*!
 * jsTree 3.0.0
 * http://jstree.com/
 *
 * Copyright (c) 2013 Ivan Bozhanov (http://vakata.com)
 *
 * Licensed same as jquery - under the terms of the MIT License
 *   http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * if using jslint please allow for the jQuery global and use following options: 
 * jslint: browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
 */
var a,c,f;if(!n.jstree){var p=0,v=0,u=!1,i=!1,e=!1,y=[],l=n("script:last").attr("src"),o=document,s=o.createElement("LI"),r,h;s.setAttribute("role","treeitem");r=o.createElement("I");r.className="jstree-icon jstree-ocl";s.appendChild(r);r=o.createElement("A");r.className="jstree-anchor";r.setAttribute("href","#");h=o.createElement("I");h.className="jstree-icon jstree-themeicon";r.appendChild(h);s.appendChild(r);r=h=null;n.jstree={version:"3.0.0-beta4",defaults:{plugins:[]},plugins:{},path:l&&l.indexOf("/")!==-1?l.replace(/\/[^\/]+$/,""):""};n.jstree.create=function(t,i){var r=new n.jstree.core(++p),u=i;return i=n.extend(!0,{},n.jstree.defaults,i),u&&u.plugins&&(i.plugins=u.plugins),n.each(i.plugins,function(n,t){n!=="core"&&(r=r.plugin(t,i[t]))}),r.init(t,i),r};n.jstree.core=function(n){this._id=n;this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[]}}};n.jstree.reference=function(t){if(t&&!n(t).length){t.id&&(t=t.id);var i=null;return n(".jstree").each(function(){var r=n(this).data("jstree");if(r&&r._model.data[t])return i=r,!1}),i}return n(t).closest(".jstree").data("jstree")};n.fn.jstree=function(i){var u=typeof i=="string",f=Array.prototype.slice.call(arguments,1),r=null;return this.each(function(){var e=n.jstree.reference(this),o=u&&e?e[i]:null;return r=u&&o?o.apply(e,f):null,e||u||i!==t&&!n.isPlainObject(i)||n(this).data("jstree",new n.jstree.create(this,i)),e&&!u&&(r=e),r!==null&&r!==t?!1:void 0}),r!==null&&r!==t?r:this};n.expr[":"].jstree=n.expr.createPseudo(function(){return function(i){return n(i).hasClass("jstree")&&n(i).data("jstree")!==t}});n.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!0},expand_selected_onload:!0};n.jstree.core.prototype={plugin:function(t,i){var r=n.jstree.plugins[t];return r?(this._data[t]={},r.prototype=this,new r(i,this)):this},init:function(t,i){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}};this.element=n(t).addClass("jstree jstree-"+this._id);this.settings=i;this.element.bind("destroyed",n.proxy(this.teardown,this));this._data.core.ready=!1;this._data.core.loaded=!1;this._data.core.rtl=this.element.css("direction")==="rtl";this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl");this.element.attr("role","tree");this.bind();this.trigger("init");this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0);this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove();this.element.html("<ul class='jstree-container-ul'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'><\/i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'><\/i>"+this.get_string("Loading ...")+"<\/a><\/li><\/ul>");this._data.core.li_height=this.get_container_ul().children("li:eq(0)").height()||18;this.trigger("loading");this.load_node("#")},destroy:function(){this.element.unbind("destroyed",this.teardown);this.teardown()},teardown:function(){this.unbind();this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});this.element=null},bind:function(){n.support.touch&&this.element.addTouch();this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var n=window.getSelection();try{n.removeAllRanges();n.collapse()}catch(t){}}}).on("click.jstree",".jstree-ocl",n.proxy(function(n){this.toggle_node(n.target)},this)).on("click.jstree",".jstree-anchor",n.proxy(function(t){t.preventDefault();n(t.currentTarget).focus();this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",n.proxy(function(t){var i=null;switch(t.which){case 13:case 32:t.type="click";n(t.currentTarget).trigger(t);break;case 37:t.preventDefault();this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(i=this.get_prev_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus());break;case 38:t.preventDefault();i=this.get_prev_dom(t.currentTarget);i&&i.length&&i.children(".jstree-anchor").focus();break;case 39:t.preventDefault();this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(n){this.get_node(n,!0).children(".jstree-anchor").focus()}):(i=this.get_next_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus());break;case 40:t.preventDefault();i=this.get_next_dom(t.currentTarget);i&&i.length&&i.children(".jstree-anchor").focus();break;case 46:t.preventDefault();i=this.get_node(t.currentTarget);i&&i.id&&i.id!=="#"&&(i=this.is_selected(i)?this.get_selected():i);break;case 113:t.preventDefault();i=this.get_node(t.currentTarget);
/*!
								if(o && o.id && o.id !== '#') {
									// this.edit(o);
								}
								*/
}},this)).on("load_node.jstree",n.proxy(function(t,i){if(i.status&&(i.node.id!=="#"||this._data.core.loaded||(this._data.core.loaded=!0,this.trigger("loaded")),!this._data.core.ready&&!this.get_container_ul().find(".jstree-loading:eq(0)").length)){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){for(var u=[],r=0,f=this._data.core.selected.length;r<f;r++)u=u.concat(this._model.data[this._data.core.selected[r]].parents);for(u=n.vakata.array_unique(u),r=0,f=u.length;r<f;r++)this.open_node(u[r],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this)).on("init.jstree",n.proxy(function(){var n=this.settings.core.themes;this._data.core.themes.dots=n.dots;this._data.core.themes.stripes=n.stripes;this._data.core.themes.icons=n.icons;this.set_theme(n.name||"default",n.url);this.set_theme_variant(n.variant)},this)).on("loading.jstree",n.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"]();this[this._data.core.themes.icons?"show_icons":"hide_icons"]();this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("focus.jstree",".jstree-anchor",n.proxy(function(t){n(t.currentTarget).mouseenter()},this)).on("blur.jstree",".jstree-anchor",n.proxy(function(t){n(t.currentTarget).mouseleave()},this)).on("mouseenter.jstree",".jstree-anchor",n.proxy(function(n){var t=this.element.find(".jstree-anchor:focus").not(".jstree-clicked");t&&t.length&&t[0]!==n.currentTarget&&t.blur();this.hover_node(n.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",n.proxy(function(n){this.dehover_node(n.currentTarget)},this))},unbind:function(){this.element.off(".jstree");n(document).off(".jstree-"+this._id)},trigger:function(n,t){t||(t={});t.instance=this;this.element.triggerHandler(n.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children("ul:eq(0)")},get_string:function(t){var i=this.settings.core.strings;return n.isFunction(i)?i.call(this,t):i&&i[t]?i[t]:t},_firstChild:function(n){for(n=n?n.firstChild:null;n!==null&&n.nodeType!==1;)n=n.nextSibling;return n},_nextSibling:function(n){for(n=n?n.nextSibling:null;n!==null&&n.nodeType!==1;)n=n.nextSibling;return n},_previousSibling:function(n){for(n=n?n.previousSibling:null;n!==null&&n.nodeType!==1;)n=n.previousSibling;return n},get_node:function(t,i){t&&t.id&&(t=t.id);var r;try{if(this._model.data[t])t=this._model.data[t];else if(((r=n(t,this.element)).length||(r=n("#"+t,this.element)).length)&&this._model.data[r.closest("li").attr("id")])t=this._model.data[r.closest("li").attr("id")];else if((r=n(t,this.element)).length&&r.hasClass("jstree"))t=this._model.data["#"];else return!1;return i&&(t=t.id==="#"?this.element:n(document.getElementById(t.id))),t}catch(u){return!1}},get_next_dom:function(t,i){var r;return(t=this.get_node(t,!0),t[0]===this.element[0])?(r=this._firstChild(this.get_container_ul()[0]),r?n(r):!1):!t||!t.length?!1:i?(r=this._nextSibling(t[0]),r?n(r):!1):t.hasClass("jstree-open")?(r=this._firstChild(t.children("ul")[0]),r?n(r):!1):(r=this._nextSibling(t[0]))!==null?n(r):t.parentsUntil(".jstree","li").next("li").eq(0)},get_prev_dom:function(t,i){var r;if(t=this.get_node(t,!0),t[0]===this.element[0])return r=this.get_container_ul()[0].lastChild,r?n(r):!1;if(!t||!t.length)return!1;if(i)return r=this._previousSibling(t[0]),r?n(r):!1;if((r=this._previousSibling(t[0]))!==null){for(t=n(r);t.hasClass("jstree-open");)t=t.children("ul:eq(0)").children("li:last");return t}return r=t[0].parentNode.parentNode,r&&r.tagName==="LI"?n(r):!1},get_parent:function(n){return(n=this.get_node(n),!n||n.id==="#")?!1:n.parent},get_children_dom:function(n){return(n=this.get_node(n,!0),n[0]===this.element[0])?this.get_container_ul().children("li"):!n||!n.length?!1:n.children("ul").children("li")},is_parent:function(n){return n=this.get_node(n),n&&(n.state.loaded===!1||n.children.length)},is_loaded:function(n){return n=this.get_node(n),n&&n.state.loaded},is_loading:function(n){return n=this.get_node(n,!0),n&&n.hasClass("jstree-loading")},is_open:function(n){return n=this.get_node(n),n&&n.state.opened},is_closed:function(n){return n=this.get_node(n),n&&this.is_parent(n)&&!n.state.opened},is_leaf:function(n){return!this.is_parent(n)},load_node:function(t,i){var r,u;if(n.isArray(t)){for(t=t.slice(),r=0,u=t.length;r<u;r++)this.load_node(t[r],i);return!0}return(t=this.get_node(t),!t)?(i.call(this,t,!1),!1):(this.get_node(t,!0).addClass("jstree-loading"),this._load_node(t,n.proxy(function(n){t.state.loaded=n;this.get_node(t,!0).removeClass("jstree-loading");this.trigger("load_node",{node:t,status:n});i&&i.call(this,t,n)},this)),!0)},_load_node:function(t,i){var r=this.settings.core.data;return r?n.isFunction(r)?r.call(this,t,n.proxy(function(r){return i.call(this,this[typeof r=="string"?"_append_html_data":"_append_json_data"](t,typeof r=="string"?n(r):r))},this)):typeof r=="object"?r.url?(r=n.extend(!0,{},r),n.isFunction(r.url)&&(r.url=r.url.call(this,t)),n.isFunction(r.data)&&(r.data=r.data.call(this,t)),n.ajax(r).done(n.proxy(function(r,u,f){var e=f.getResponseHeader("Content-Type");return e.indexOf("json")!==-1?i.call(this,this._append_json_data(t,r)):e.indexOf("html")!==-1?i.call(this,this._append_html_data(t,n(r))):void 0},this)).fail(n.proxy(function(){i.call(this,!1)},this))):i.call(this,this._append_json_data(t,r)):typeof r=="string"?i.call(this,this._append_html_data(t,r)):i.call(this,!1):i.call(this,t.id==="#"?this._append_html_data(t,this._data.core.original_container_html.clone(!0)):!1)},_node_changed:function(n){n=this.get_node(n);n&&this._model.changed.push(n.id)},_append_html_data:function(t,i){t=this.get_node(t);var l=i.is("ul")?i.children():i,e=t.id,h=[],r=[],o=this._model.data,u=o[e],a=this._data.core.selected.length,f,s,c;for(l.each(n.proxy(function(t,i){f=this._parse_model_from_html(n(i),e,u.parents.concat());f&&(h.push(f),r.push(f),o[f].children_d.length&&(r=r.concat(o[f].children_d)))},this)),u.children=h,u.children_d=r,s=0,c=u.parents.length;s<c;s++)o[u.parents[s]].children_d=o[u.parents[s]].children_d.concat(r);return this.trigger("model",{nodes:r,parent:e}),e!=="#"?(this._node_changed(e),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==a&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),!0},_append_json_data:function(i,r){i=this.get_node(i);var f=r,l=i.id,a=[],c=[],e=this._model.data,o=e[l],v=this._data.core.selected.length,s,u,h;if(f.d&&(f=f.d,typeof f=="string"&&(f=n.vakata.json.decode(f))),n.isArray(f)||(f=[f]),f.length&&f[0].id!==t&&f[0].parent!==t){for(u=0,h=f.length;u<h;u++)f[u].children||(f[u].children=[]),e[f[u].id]=f[u];for(u=0,h=f.length;u<h;u++)e[f[u].parent].children.push(f[u].id),o.children_d.push(f[u].id);for(u=0,h=o.children.length;u<h;u++)s=this._parse_model_from_flat_json(e[o.children[u]],l,o.parents.concat()),c.push(s),e[s].children_d.length&&(c=c.concat(e[s].children_d))}else{for(u=0,h=f.length;u<h;u++)s=this._parse_model_from_json(f[u],l,o.parents.concat()),s&&(a.push(s),c.push(s),e[s].children_d.length&&(c=c.concat(e[s].children_d)));for(o.children=a,o.children_d=c,u=0,h=o.parents.length;u<h;u++)e[o.parents[u]].children_d=e[o.parents[u]].children_d.concat(c)}return this.trigger("model",{nodes:c,parent:l}),l!=="#"?(this._node_changed(l),this.redraw()):this.redraw(!0),this._data.core.selected.length!==v&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),!0},_parse_model_from_html:function(t,i,r){r=r?[].concat(r):[];i&&r.unshift(i);var o,s,c=this._model.data,u={id:!1,text:!1,icon:!0,parent:i,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},e,f,h;for(e in this._model.default_state)this._model.default_state.hasOwnProperty(e)&&(u.state[e]=this._model.default_state[e]);if(f=n.vakata.attributes(t,!0),n.each(f,function(t,i){if(i=n.trim(i),!i.length)return!0;u.li_attr[t]=i;t==="id"&&(u.id=i)}),f=t.children("a").eq(0),f.length&&(f=n.vakata.attributes(f,!0),n.each(f,function(t,i){i=n.trim(i);i.length&&(u.a_attr[t]=i)})),f=t.children("a:eq(0)").length?t.children("a:eq(0)").clone():t.clone(),f.children("ins, i, ul").remove(),f=f.html(),f=n("<div />").html(f),u.text=f.html(),f=t.data(),u.data=f?n.extend(!0,{},f):null,u.state.opened=t.hasClass("jstree-open"),u.state.selected=t.children("a").hasClass("jstree-clicked"),u.state.disabled=t.children("a").hasClass("jstree-disabled"),u.data&&u.data.jstree)for(e in u.data.jstree)u.data.jstree.hasOwnProperty(e)&&(u.state[e]=u.data.jstree[e]);f=t.children("a").children(".jstree-themeicon");f.length&&(u.icon=f.hasClass("jstree-themeicon-hidden")?!1:f.attr("rel"));u.state.icon&&(u.icon=u.state.icon);f=t.children("ul").children("li");do h="j"+this._id+"_"+ ++v;while(c[h]);return u.id=u.li_attr.id||h,f.length?(f.each(n.proxy(function(t,i){o=this._parse_model_from_html(n(i),u.id,r);s=this._model.data[o];u.children.push(o);s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d))},this)),u.children_d=u.children_d.concat(u.children)):t.hasClass("jstree-closed")&&(u.state.loaded=!1),u.li_attr.class&&(u.li_attr.class=u.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),u.a_attr.class&&(u.a_attr.class=u.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),c[u.id]=u,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_flat_json:function(n,i,r){r=r?r.concat():[];i&&r.unshift(i);var c=n.id,e=this._model.data,o=this._model.default_state,u,l,s,h,f={id:c,text:n.text||"",icon:n.icon!==t?n.icon:!0,parent:i,parents:r,children:n.children||[],children_d:n.children_d||[],data:n.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(u in o)o.hasOwnProperty(u)&&(f.state[u]=o[u]);if(n&&n.data&&n.data.jstree&&n.data.jstree.icon&&(f.icon=n.data.jstree.icon),n&&n.data&&(f.data=n.data,n.data.jstree))for(u in n.data.jstree)n.data.jstree.hasOwnProperty(u)&&(f.state[u]=n.data.jstree[u]);if(n&&typeof n.state=="object")for(u in n.state)n.state.hasOwnProperty(u)&&(f.state[u]=n.state[u]);if(n&&typeof n.li_attr=="object")for(u in n.li_attr)n.li_attr.hasOwnProperty(u)&&(f.li_attr[u]=n.li_attr[u]);if(f.li_attr.id||(f.li_attr.id=c),n&&typeof n.a_attr=="object")for(u in n.a_attr)n.a_attr.hasOwnProperty(u)&&(f.a_attr[u]=n.a_attr[u]);for(n&&n.children&&n.children===!0&&(f.state.loaded=!1,f.children=[],f.children_d=[]),e[f.id]=f,u=0,l=f.children.length;u<l;u++)s=this._parse_model_from_flat_json(e[f.children[u]],f.id,r),h=e[s],f.children_d.push(s),h.children_d.length&&(f.children_d=f.children_d.concat(h.children_d));return delete n.data,delete n.children,e[f.id].original=n,f.state.selected&&this._data.core.selected.push(f.id),f.id},_parse_model_from_json:function(n,i,r){r=r?r.concat():[];i&&r.unshift(i);var e=!1,f,l,o,s,h=this._model.data,c=this._model.default_state,u;do e="j"+this._id+"_"+ ++v;while(h[e]);u={id:!1,text:typeof n=="string"?n:"",icon:typeof n=="object"&&n.icon!==t?n.icon:!0,parent:i,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(f in c)c.hasOwnProperty(f)&&(u.state[f]=c[f]);if(n&&n.id&&(u.id=n.id),n&&n.text&&(u.text=n.text),n&&n.data&&n.data.jstree&&n.data.jstree.icon&&(u.icon=n.data.jstree.icon),n&&n.data&&(u.data=n.data,n.data.jstree))for(f in n.data.jstree)n.data.jstree.hasOwnProperty(f)&&(u.state[f]=n.data.jstree[f]);if(n&&typeof n.state=="object")for(f in n.state)n.state.hasOwnProperty(f)&&(u.state[f]=n.state[f]);if(n&&typeof n.li_attr=="object")for(f in n.li_attr)n.li_attr.hasOwnProperty(f)&&(u.li_attr[f]=n.li_attr[f]);if(u.li_attr.id&&!u.id&&(u.id=u.li_attr.id),u.id||(u.id=e),u.li_attr.id||(u.li_attr.id=u.id),n&&typeof n.a_attr=="object")for(f in n.a_attr)n.a_attr.hasOwnProperty(f)&&(u.a_attr[f]=n.a_attr[f]);if(n&&n.children&&n.children.length){for(f=0,l=n.children.length;f<l;f++)o=this._parse_model_from_json(n.children[f],u.id,r),s=h[o],u.children.push(o),s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d));u.children_d=u.children_d.concat(u.children)}return n&&n.children&&n.children===!0&&(u.state.loaded=!1,u.children=[],u.children_d=[]),delete n.data,delete n.children,u.original=n,h[u.id]=u,u.state.selected&&this._data.core.selected.push(u.id),u.id},_redraw:function(){for(var t=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),i=document.createElement("UL"),r,n=0,u=t.length;n<u;n++)r=this.redraw_node(t[n],!0,this._model.force_full_redraw),r&&this._model.force_full_redraw&&i.appendChild(r);this._model.force_full_redraw&&(i.className=this.get_container_ul()[0].className,this.element.empty().append(i));this._model.force_full_redraw=!1;this._model.changed=[];this.trigger("redraw",{nodes:t})},redraw:function(n){n&&(this._model.force_full_redraw=!0);this._redraw()},redraw_node:function(t,i,r){var u=this.get_node(t),f=!1,a=!1,v=!1,e=!1,o=!1,l=!1,h="",y=document,c=this._model.data;if(!u)return!1;if(u.id==="#")return this.redraw(!0);if(i=i||u.children.length===0,t=y.getElementById(u.id),t)t=n(t),r||(f=t.parent().parent()[0],f===this.element[0]&&(f=null),a=t.index()),c[u.id].data=t.data(),i||!u.children.length||t.children("ul").length||(i=!0),i||(v=t.children("UL")[0]),t.remove();else if(i=!0,!r){if(f=u.parent!=="#"?n("#"+u.parent,this.element)[0]:null,f!==null&&(!f||!c[u.parent].state.opened))return!1;a=n.inArray(u.id,f===null?c["#"].children:c[u.parent].children)}t=s.cloneNode(!0);h="jstree-node ";for(e in u.li_attr)if(u.li_attr.hasOwnProperty(e)){if(e==="id")continue;e!=="class"?t.setAttribute(e,u.li_attr[e]):h+=u.li_attr[e]}h+=!u.children.length&&u.state.loaded?" jstree-leaf":u.state.opened?" jstree-open":" jstree-closed";u.parent!==null&&c[u.parent].children[c[u.parent].children.length-1]===u.id&&(h+=" jstree-last");t.id=u.id;t.className=h;h=(u.state.selected?" jstree-clicked":"")+(u.state.disabled?" jstree-disabled":"");for(o in u.a_attr)if(u.a_attr.hasOwnProperty(o)){if(o==="href"&&u.a_attr[o]==="#")continue;o!=="class"?t.childNodes[1].setAttribute(o,u.a_attr[o]):h+=" "+u.a_attr[o]}if(h.length&&(t.childNodes[1].className="jstree-anchor "+h),(u.icon&&u.icon!==!0||u.icon===!1)&&(u.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":u.icon.indexOf("/")===-1&&u.icon.indexOf(".")===-1?t.childNodes[1].childNodes[0].className+=" "+u.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage="url("+u.icon+")",t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),t.childNodes[1].innerHTML+=u.text,u.data&&n.data(t,u.data),i&&u.children.length&&u.state.opened){for(l=y.createElement("UL"),l.setAttribute("role","group"),l.className="jstree-children",e=0,o=u.children.length;e<o;e++)l.appendChild(this.redraw_node(u.children[e],i,!0));t.appendChild(l)}return v&&t.appendChild(v),r||(f||(f=this.element[0]),f.getElementsByTagName("UL").length?f=f.getElementsByTagName("UL")[0]:(e=y.createElement("UL"),e.setAttribute("role","group"),e.className="jstree-children",f.appendChild(e),f=e),a<f.childNodes.length?f.insertBefore(t,f.childNodes[a]):f.appendChild(t)),t},open_node:function(i,r,u){var e,o,f,s;if(n.isArray(i)){for(i=i.slice(),e=0,o=i.length;e<o;e++)this.open_node(i[e],r,u);return!0}if(i=this.get_node(i),!i||i.id==="#")return!1;if(u=u===t?this.settings.core.animation:u,!this.is_closed(i))return r&&r.call(this,i,!1),!1;if(this.is_loaded(i))f=this.get_node(i,!0),s=this,f.length&&(i.children.length&&!this._firstChild(f.children("ul")[0])&&(i.state.opened=!0,this.redraw_node(i,!0),f=this.get_node(i,!0)),u?f.children("ul").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").children("ul").stop(!0,!0).slideDown(u,function(){this.style.display="";s.trigger("after_open",{node:i})}):f[0].className=f[0].className.replace("jstree-closed","jstree-open")),i.state.opened=!0,r&&r.call(this,i,!0),this.trigger("open_node",{node:i}),u&&f.length||this.trigger("after_open",{node:i});else{if(this.is_loading(i))return setTimeout(n.proxy(function(){this.open_node(i,r,u)},this),500);this.load_node(i,function(n,t){return t?this.open_node(n,r,u):r?r.call(this,n,!1):!1})}},_open_to:function(t){if(t=this.get_node(t),!t||t.id==="#")return!1;for(var u=t.parents,i=0,r=u.length;i<r;i+=1)i!=="#"&&this.open_node(u[i],!1,0);return n(document.getElementById(t.id))},close_node:function(i,r){var f,e,o,u;if(n.isArray(i)){for(i=i.slice(),f=0,e=i.length;f<e;f++)this.close_node(i[f],r);return!0}if(i=this.get_node(i),!i||i.id==="#")return!1;r=r===t?this.settings.core.animation:r;o=this;u=this.get_node(i,!0);u.length&&(r?u.children("ul").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").children("ul").stop(!0,!0).slideUp(r,function(){this.style.display="";u.children("ul").remove();o.trigger("after_close",{node:i})}):(u[0].className=u[0].className.replace("jstree-open","jstree-closed"),u.children("ul").remove()));i.state.opened=!1;this.trigger("close_node",{node:i});r&&u.length||this.trigger("after_close",{node:i})},toggle_node:function(t){var i,r;if(n.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.toggle_node(t[i]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(n,t,i){if(n||(n="#"),n=this.get_node(n),!n)return!1;var r=n.id==="#"?this.get_container_ul():this.get_node(n,!0),u,f,e;if(!r.length){for(u=0,f=n.children_d.length;u<f;u++)this.is_closed(this._mode.data[n.children_d[u]])&&(this._mode.data[n.children_d[u]].state.opened=!0);return this.trigger("open_all",{node:n})}i=i||r;e=this;r=this.is_closed(n)?r.find("li.jstree-closed").addBack():r.find("li.jstree-closed");r.each(function(){e.open_node(this,function(n,r){r&&this.is_parent(n)&&this.open_all(n,t,i)},t||0)});i.find("li.jstree-closed").length===0&&this.trigger("open_all",{node:this.get_node(i)})},close_all:function(n,t){if(n||(n="#"),n=this.get_node(n),!n)return!1;var i=n.id==="#"?this.get_container_ul():this.get_node(n,!0),f=this,r,u;if(!i.length){for(r=0,u=n.children_d.length;r<u;r++)this._mode.data[n.children_d[r]].state.opened=!1;return this.trigger("close_all",{node:n})}i=this.is_open(n)?i.find("li.jstree-open").addBack():i.find("li.jstree-open");i.vakata_reverse().each(function(){f.close_node(this,t||0)});this.trigger("close_all",{node:n})},is_disabled:function(n){return n=this.get_node(n),n&&n.state&&n.state.disabled},enable_node:function(t){var i,r;if(n.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.enable_node(t[i]);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;t.state.disabled=!1;this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled");this.trigger("enable_node",{node:t})},disable_node:function(t){var i,r;if(n.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.disable_node(t[i]);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;t.state.disabled=!0;this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled");this.trigger("disable_node",{node:t})},activate_node:function(n,t){if(this.is_disabled(n))return!1;if(this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&(!t.shiftKey||this._data.core.last_clicked&&this.get_parent(n)&&this.get_parent(n)===this._data.core.last_clicked.parent))if(t.shiftKey)for(var f=this.get_node(n).id,e=this._data.core.last_clicked.id,r=this.get_node(this._data.core.last_clicked.parent).children,u=!1,i=0,o=r.length;i<o;i+=1)r[i]===f&&(u=!u),r[i]===e&&(u=!u),u||r[i]===f||r[i]===e?this.select_node(r[i]):this.deselect_node(r[i]);else this.is_selected(n)?this.deselect_node(n):this.select_node(n);else this.deselect_all(!0),this.select_node(n),this._data.core.last_clicked=this.get_node(n);this.trigger("activate_node",{node:this.get_node(n)})},hover_node:function(n){if(n=this.get_node(n,!0),!n||!n.length)return!1;n.children(".jstree-anchor").addClass("jstree-hovered");this.trigger("hover_node",{node:this.get_node(n)})},dehover_node:function(n){if(n=this.get_node(n,!0),!n||!n.length)return!1;n.children(".jstree-anchor").removeClass("jstree-hovered");this.trigger("dehover_node",{node:this.get_node(n)})},select_node:function(t,i,r){var u,f,e;if(n.isArray(t)){for(t=t.slice(),f=0,e=t.length;f<e;f++)this.select_node(t[f],i,r);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;u=this.get_node(t,!0);t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),r||(u=this._open_to(t)),u&&u.length&&u.children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected}),i||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected}))},deselect_node:function(t,i){var r,f,u;if(n.isArray(t)){for(t=t.slice(),r=0,f=t.length;r<f;r++)this.deselect_node(t[r],i);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;u=this.get_node(t,!0);t.state.selected&&(t.state.selected=!1,this._data.core.selected=n.vakata.array_remove_item(this._data.core.selected,t.id),u.length&&u.children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected}),i||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected}))},select_all:function(n){var r=this._data.core.selected.concat([]),t,i;for(this._data.core.selected=this._model.data["#"].children_d.concat(),t=0,i=this._data.core.selected.length;t<i;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!0);this.redraw(!0);this.trigger("select_all",{selected:this._data.core.selected});n||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:r})},deselect_all:function(n){for(var i=this._data.core.selected.concat([]),t=0,r=this._data.core.selected.length;t<r;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[];this.element.find(".jstree-clicked").removeClass("jstree-clicked");this.trigger("deselect_all",{selected:this._data.core.selected,node:i});n||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:i})},is_selected:function(n){return(n=this.get_node(n),!n||n.id==="#")?!1:n.state.selected},get_selected:function(t){return t?n.map(this._data.core.selected,n.proxy(function(n){return this.get_node(n)},this)):this._data.core.selected},get_state:function(){var t={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(var n in this._model.data)this._model.data.hasOwnProperty(n)&&n!=="#"&&(this._model.data[n].state.opened&&t.core.open.push(n),this._model.data[n].state.selected&&t.core.selected.push(n));return t},set_state:function(i,r){if(i){if(i.core){var f,e,u,o;if(n.isArray(i.core.open))return f=!0,e=!1,u=this,n.each(i.core.open.concat([]),function(t,r){e=document.getElementById(r);e&&(u.is_loaded(r)?(u.is_closed(r)&&u.open_node(r,!1,0),n.vakata.array_remove_item(i.core.open,r)):(u.is_loading(r)||u.open_node(r,n.proxy(function(){this.set_state(i)},u),0),f=!1))}),f&&(delete i.core.open,this.set_state(i,r)),!1;if(i.core.scroll)return i.core.scroll&&i.core.scroll.left!==t&&this.element.scrollLeft(i.core.scroll.left),i.core.scroll&&i.core.scroll.top!==t&&this.element.scrollTop(i.core.scroll.top),delete i.core.scroll,delete i.core.open,this.set_state(i,r),!1;
/*!
					if(state.core.themes) {
						if(state.core.themes.name) {
							this.set_theme(state.core.themes.name);
						}
						if(typeof state.core.themes.dots !== 'undefined') {
							this[ state.core.themes.dots ? "show_dots" : "hide_dots" ]();
						}
						if(typeof state.core.themes.icons !== 'undefined') {
							this[ state.core.themes.icons ? "show_icons" : "hide_icons" ]();
						}
						delete state.core.themes;
						delete state.core.open;
						this.set_state(state, callback);
						return false;
					}
					*/
return i.core.selected?(o=this,this.deselect_all(),n.each(i.core.selected,function(n,t){o.select_node(t)}),delete i.core.selected,this.set_state(i,r),!1):n.isEmptyObject(i)?(r&&r.call(this),this.trigger("set_state"),!1):!0}return!0}return!1},refresh:function(){this._data.core.state=this.get_state();this.load_node("#",function(t,i){i&&this.set_state(n.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")});this._data.core.state=null})},set_id:function(t,i){if(t=this.get_node(t),!t||t.id==="#")return!1;var r,f,u=this._model.data;for(u[t.parent].children[n.inArray(t.id,u[t.parent].children)]=i,r=0,f=t.parents.length;r<f;r++)u[t.parents[r]].children_d[n.inArray(t.id,u[t.parents[r]].children_d)]=i;for(r=0,f=t.children.length;r<f;r++)u[t.children[r]].parent=i;for(r=0,f=t.children_d.length;r<f;r++)u[t.children_d[r]].parents[n.inArray(t.id,u[t.children_d[r]].parents)]=i;return r=this.get_node(t.id,!0),r&&r.attr("id",i),delete u[t.id],t.id=i,u[i]=t,!0},get_text:function(n){return n=this.get_node(n),!n||n.id==="#"?!1:n.text},set_text:function(t,i){var u,f,r,e;if(n.isArray(t)){for(t=t.slice(),u=0,f=t.length;u<f;u++)this.set_text(t[u],i);return!0}return(t=this.get_node(t),!t||t.id==="#")?!1:(t.text=i,r=this.get_node(t,!0),r.length&&(r=r.children(".jstree-anchor:eq(0)"),e=r.children("I").clone(),r.html(i).prepend(e),this.trigger("set_text",{obj:t,text:i})),!0)},get_json:function(n,t){if(n=this.get_node(n||"#"),!n)return!1;var i={id:n.id,text:n.text,icon:this.get_icon(n),li_attr:n.li_attr,a_attr:n.a_attr,state:{},data:t&&t.no_data?!1:this.get_node(n,!0).length?this.get_node(n,!0).data():n.data,children:[]},r,u;if(!t||!t.no_state)for(r in n.state)n.state.hasOwnProperty(r)&&(i.state[r]=n.state[r]);if(t&&t.no_id&&i.li_attr&&i.li_attr.id&&(delete i.li_attr.id,delete i.id),!t||!t.no_children)for(r=0,u=n.children.length;r<u;r++)i.children.push(this.get_json(n.children[r],t));return n.id==="#"?i.children:i},create_node:function(i,r,u,f,e){if(i=this.get_node(i),!i)return!1;if(u=u===t?"last":u,!u.match(/^(before|after)$/)&&!e&&!this.is_loaded(i))return this.load_node(i,function(){this.create_node(i,r,u,f,!0)});r||(r={text:this.get_string("New node")});r.text===t&&(r.text=this.get_string("New node"));var o,h,s,c;i.id==="#"&&(u==="before"&&(u="first"),u==="after"&&(u="last"));switch(u){case"before":o=this.get_node(i.parent);u=n.inArray(i.id,o.children);i=o;break;case"after":o=this.get_node(i.parent);u=n.inArray(i.id,o.children)+1;i=o;break;case"inside":case"first":u=0;break;case"last":u=i.children.length;break;default:u||(u=0)}if((u>i.children.length&&(u=i.children.length),r.id||(r.id=!0),!this.check("create_node",r,i,u))||(r.id===!0&&delete r.id,r=this._parse_model_from_json(r,i.id,i.parents.concat()),!r))return!1;for(o=this.get_node(r),h=[],h.push(r),h=h.concat(o.children_d),this.trigger("model",{nodes:h,parent:i.id}),i.children_d=i.children_d.concat(h),s=0,c=i.parents.length;s<c;s++)this._model.data[i.parents[s]].children_d=this._model.data[i.parents[s]].children_d.concat(h);for(r=o,o=[],s=0,c=i.children.length;s<c;s++)o[s>=u?s+1:s]=i.children[s];return o[u]=r.id,i.children=o,this.redraw_node(i,!0),f&&f.call(this,this.get_node(r)),this.trigger("create_node",{node:this.get_node(r),parent:i.id,position:u}),r.id},rename_node:function(t,i){var r,u,f;if(n.isArray(t)){for(t=t.slice(),r=0,u=t.length;r<u;r++)this.rename_node(t[r],i);return!0}return(t=this.get_node(t),!t||t.id==="#")?!1:(f=t.text,!this.check("rename_node",t,this.get_parent(t),i))?!1:(this.set_text(t,i),this.trigger("rename_node",{node:t,text:i,old:f}),!0)},delete_node:function(t){var o,c,u,i,f,e,l,r,s,h;if(n.isArray(t)){for(t=t.slice(),o=0,c=t.length;o<c;o++)this.delete_node(t[o]);return!0}if((t=this.get_node(t),!t||t.id==="#")||(u=this.get_node(t.parent),i=n.inArray(t.id,u.children),h=!1,!this.check("delete_node",t,u,i)))return!1;for(i!==-1&&(u.children=n.vakata.array_remove(u.children,i)),f=t.children_d.concat([]),f.push(t.id),r=0,s=f.length;r<s;r++){for(e=0,l=t.parents.length;e<l;e++)i=n.inArray(f[r],this._model.data[t.parents[e]].children_d),i!==-1&&(this._model.data[t.parents[e]].children_d=n.vakata.array_remove(this._model.data[t.parents[e]].children_d,i));this._model.data[f[r]].state.selected&&(h=!0,i=n.inArray(f[r],this._data.core.selected),i!==-1&&(this._data.core.selected=n.vakata.array_remove(this._data.core.selected,i)))}for(this.trigger("delete_node",{node:t,parent:u.id}),h&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:u.id}),r=0,s=f.length;r<s;r++)delete this._model.data[f[r]];return this.redraw_node(u,!0),!0},check:function(t,i,r,u){i=i&&i.id?i:this.get_node(i);r=r&&r.id?r:this.get_node(r);var f=t.match(/^move_node|copy_node|create_node$/i)?r:i,e=this.settings.core.check_callback;return t==="move_node"&&(i.id===r.id||n.inArray(i.id,r.children)===u||n.inArray(r.id,i.children_d)!==-1)?!1:(f=this.get_node(f,!0),f.length&&(f=f.data("jstree")),f&&f.functions&&(f.functions[t]===!1||f.functions[t]===!0))?f.functions[t]:e===!1||n.isFunction(e)&&e.call(this,t,i,r,u)===!1||e&&e[t]===!1?!1:!0},move_node:function(i,r,u,f,e){var w,k,v,s,l,b,c,h,o,a,p,d,y;if(n.isArray(i)){for(i=i.reverse().slice(),w=0,k=i.length;w<k;w++)this.move_node(i[w],r,u,f,e);return!0}if(i=i&&i.id?i:this.get_node(i),r=this.get_node(r),u=u===t?0:u,!r||!i||i.id==="#")return!1;if(!u.toString().match(/^(before|after)$/)&&!e&&!this.is_loaded(r))return this.load_node(r,function(){this.move_node(i,r,u,f,!0)});if(v=(i.parent||"#").toString(),s=!u.toString().match(/^(before|after)$/)||r.id==="#"?r:this.get_node(r.parent),l=this._model.data[i.id]?this:n.jstree.reference(i.id),b=!l||!l._id||this._id!==l._id,b)return this.copy_node(i,r,u,f,e)?(l&&l.delete_node(i),!0):!1;s.id==="#"&&(u==="before"&&(u="first"),u==="after"&&(u="last"));switch(u){case"before":u=n.inArray(r.id,s.children);break;case"after":u=n.inArray(r.id,s.children)+1;break;case"inside":case"first":u=0;break;case"last":u=s.children.length;break;default:u||(u=0)}if(u>s.children.length&&(u=s.children.length),!this.check("move_node",i,s,u))return!1;if(i.parent===s.id){for(c=s.children.concat(),h=n.inArray(i.id,c),h!==-1&&(c=n.vakata.array_remove(c,h),u>h&&u--),h=[],o=0,a=c.length;o<a;o++)h[o>=u?o+1:o]=c[o];h[u]=i.id;s.children=h;this._node_changed(s.id);this.redraw(s.id==="#")}else{for(h=i.children_d.concat(),h.push(i.id),o=0,a=i.parents.length;o<a;o++){for(c=[],y=l._model.data[i.parents[o]].children_d,p=0,d=y.length;p<d;p++)n.inArray(y[p],h)===-1&&c.push(y[p]);l._model.data[i.parents[o]].children_d=c}for(l._model.data[v].children=n.vakata.array_remove_item(l._model.data[v].children,i.id),o=0,a=s.parents.length;o<a;o++)this._model.data[s.parents[o]].children_d=this._model.data[s.parents[o]].children_d.concat(h);for(c=[],o=0,a=s.children.length;o<a;o++)c[o>=u?o+1:o]=s.children[o];for(c[u]=i.id,s.children=c,s.children_d.push(i.id),s.children_d=s.children_d.concat(i.children_d),i.parent=s.id,h=s.parents.concat(),h.unshift(s.id),y=i.parents.length,i.parents=h,h=h.concat(),o=0,a=i.children_d.length;o<a;o++)this._model.data[i.children_d[o]].parents=this._model.data[i.children_d[o]].parents.slice(0,y*-1),Array.prototype.push.apply(this._model.data[i.children_d[o]].parents,h);this._node_changed(v);this._node_changed(s.id);this.redraw(v==="#"||s.id==="#")}return f&&f.call(this,i,s,u),this.trigger("move_node",{node:i,parent:s.id,position:u,old_parent:v,is_multi:b,old_instance:l,new_instance:this}),!0},copy_node:function(i,r,u,f,e){var v,p,h,l,s,y,c,w,o,a,b;if(n.isArray(i)){for(i=i.reverse().slice(),v=0,p=i.length;v<p;v++)this.copy_node(i[v],r,u,f,e);return!0}if(i=i&&i.id?i:this.get_node(i),r=this.get_node(r),u=u===t?0:u,!r||!i||i.id==="#")return!1;if(!u.toString().match(/^(before|after)$/)&&!e&&!this.is_loaded(r))return this.load_node(r,function(){this.copy_node(i,r,u,f,!0)});w=(i.parent||"#").toString();o=!u.toString().match(/^(before|after)$/)||r.id==="#"?r:this.get_node(r.parent);a=this._model.data[i.id]?this:n.jstree.reference(i.id);b=!a||!a._id||this._id!==a._id;o.id==="#"&&(u==="before"&&(u="first"),u==="after"&&(u="last"));switch(u){case"before":u=n.inArray(r.id,o.children);break;case"after":u=n.inArray(r.id,o.children)+1;break;case"inside":case"first":u=0;break;case"last":u=o.children.length;break;default:u||(u=0)}if((u>o.children.length&&(u=o.children.length),!this.check("copy_node",i,o,u))||(c=a?a.get_json(i,{no_id:!0,no_data:!0,no_state:!0}):i,!c)||(c.id===!0&&delete c.id,c=this._parse_model_from_json(c,o.id,o.parents.concat()),!c))return!1;for(l=this.get_node(c),h=[],h.push(c),h=h.concat(l.children_d),this.trigger("model",{nodes:h,parent:o.id}),s=0,y=o.parents.length;s<y;s++)this._model.data[o.parents[s]].children_d=this._model.data[o.parents[s]].children_d.concat(h);for(h=[],s=0,y=o.children.length;s<y;s++)h[s>=u?s+1:s]=o.children[s];return h[u]=l.id,o.children=h,o.children_d.push(l.id),o.children_d=o.children_d.concat(l.children_d),this._node_changed(o.id),this.redraw(o.id==="#"),f&&f.call(this,l,o,u),this.trigger("copy_node",{node:l,original:i,parent:o.id,position:u,old_parent:w,is_multi:b,old_instance:a,new_instance:this}),l.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),n.isArray(t)||(t=[t]),!t.length)return!1;for(var o=[],r,f=0,s=t.length;f<s;f++)r=this.get_node(t[f]),r&&r.id&&r.id!=="#"&&o.push(r);if(!o.length)return!1;u=o;e=this;i="move_node";this.trigger("cut",{node:t})},copy:function(t){if(t||(t=this._data.core.selected.concat()),n.isArray(t)||(t=[t]),!t.length)return!1;for(var o=[],r,f=0,s=t.length;f<s;f++)r=this.get_node(t[f]),r&&r.id&&r.id!=="#"&&o.push(r);if(!o.length)return!1;u=o;e=this;i="copy_node";this.trigger("copy",{node:t})},get_buffer:function(){return{mode:i,node:u,inst:e}},can_paste:function(){return i!==!1&&u!==!1},paste:function(n){if(n=this.get_node(n),!n||!i||!i.match(/^(copy_node|move_node)$/)||!u)return!1;this[i](u,n)&&this.trigger("paste",{parent:n.id,node:u,mode:i});u=!1;i=!1;e=!1},edit:function(t,i){if(t=this._open_to(t),!t||!t.length)return!1;var c=this._data.core.rtl,s=this.element.width(),r=t.children(".jstree-anchor"),u=n("<span>"),f=typeof i=="string"?i:this.get_text(t),e=n("<div />",{css:{position:"absolute",top:"-200px",left:c?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),o=n("<input />",{value:f,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:n.proxy(function(){var i=u.children(".jstree-rename-input"),n=i.val();n===""&&(n=f);e.remove();u.replaceWith(r);u.remove();this.rename_node(t,n)===!1&&this.set_text(t,f)},this),keydown:function(n){var t=n.which;t===27&&(this.value=f);(t===27||t===13||t===37||t===38||t===39||t===40||t===32)&&n.stopImmediatePropagation();(t===27||t===13)&&(n.preventDefault(),this.blur())},click:function(n){n.stopImmediatePropagation()},mousedown:function(n){n.stopImmediatePropagation()},keyup:function(){o.width(Math.min(e.text("pW"+this.value).width(),s))},keypress:function(n){if(n.which===13)return!1}}),h={fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||"",wordSpacing:r.css("wordSpacing")||""};this.set_text(t,"");u.attr("class",r.attr("class")).append(r.contents().clone()).append(o);r.replaceWith(u);e.css(h);o.css(h).width(Math.min(e.text("pW"+o[0].value).width(),s))[0].select()},set_theme:function(t,i){if(!t)return!1;if(i===!0){var r=this.settings.core.themes.dir;r||(r=n.jstree.path+"/themes");i=r+"/"+t+"/style.css"}i&&n.inArray(i,y)===-1&&(n("head").append('<link rel="stylesheet" href="'+i+'" type="text/css" />'),y.push(i));this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name);this._data.core.themes.name=t;this.element.addClass("jstree-"+t);this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive");this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(n){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant);this._data.core.themes.variant=n;n&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0;this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1;this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0;this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1;this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0;this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1;this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(t,i){var u,e,r,f;if(n.isArray(t)){for(t=t.slice(),u=0,e=t.length;u<e;u++)this.set_icon(t[u],i);return!0}return(t=this.get_node(t),!t||t.id==="#")?!1:(f=t.icon,t.icon=i,r=this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon"),i===!1?this.hide_icon(t):i===!0?r.removeClass("jstree-themeicon-custom "+f).css("background","").removeAttr("rel"):i.indexOf("/")===-1&&i.indexOf(".")===-1?(r.removeClass(f).css("background",""),r.addClass(i+" jstree-themeicon-custom").attr("rel",i)):(r.removeClass(f).css("background",""),r.addClass("jstree-themeicon-custom").css("background","url('"+i+"') center center no-repeat").attr("rel",i)),!0)},get_icon:function(n){return n=this.get_node(n),!n||n.id==="#"?!1:n.icon},hide_icon:function(t){var i,r;if(n.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.hide_icon(t[i]);return!0}return(t=this.get_node(t),!t||t==="#")?!1:(t.icon=!1,this.get_node(t,!0).children("a").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var i,u,r;if(n.isArray(t)){for(t=t.slice(),i=0,u=t.length;i<u;i++)this.show_icon(t[i]);return!0}return(t=this.get_node(t),!t||t==="#")?!1:(r=this.get_node(t,!0),t.icon=r.length?r.children("a").children(".jstree-themeicon").attr("rel"):!0,t.icon||(t.icon=!0),r.children("a").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}};n.vakata={};n.fn.vakata_reverse=[].reverse;n.vakata.attributes=function(t,i){t=n(t)[0];var r=i?{}:[];return t&&t.attributes&&n.each(t.attributes,function(t,u){n.inArray(u.nodeName.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])===-1&&u.nodeValue!==null&&n.trim(u.nodeValue)!==""&&(i?r[u.nodeName]=u.nodeValue:r.push(u.nodeName))}),r};n.vakata.array_unique=function(n){for(var r=[],i,t=0,u=n.length;t<u;t++){for(i=0;i<=t;i++)if(n[t]===n[i])break;i===t&&r.push(n[t])}return r};n.vakata.array_remove=function(n,t,i){var r=n.slice((i||t)+1||n.length);return n.length=t<0?n.length+t:t,n.push.apply(n,r),n};n.vakata.array_remove_item=function(t,i){var r=n.inArray(i,t);return r!==-1?n.vakata.array_remove(t,r):t},function(){var t={},r=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}},i=r(window.navigator.userAgent);i.browser&&(t[i.browser]=!0,t.version=i.version);t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0);n.vakata.browser=t}();n.vakata.browser.msie&&n.vakata.browser.version<8&&(n.jstree.defaults.core.animation=0),function(n,t){var i=function(n){var t=/["\\\x00-\x1f\x7f-\x9f]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return n.match(t)?'"'+n.replace(t,function(n){var t=i[n];return typeof t=="string"?t:(t=n.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+n+'"'};n.vakata.json={encode:JSON&&JSON.stringify?JSON.stringify:function(r){if(r===null)return"null";var u=[],f;switch(typeof r){case"undefined":return t;case"number":case"boolean":return r.toString();case"string":return i(r);case"object":if(n.isFunction(r.toJSON))return n.vakata.json.encode(r.toJSON());if(r.constructor===Date)return'"'+r.getUTCFullYear()+"-"+String("0"+(r.getUTCMonth()+1)).slice(-2)+"-"+String("0"+r.getUTCDate()).slice(-2)+"T"+String("0"+r.getUTCHours()).slice(-2)+":"+String("0"+r.getUTCMinutes()).slice(-2)+":"+String("0"+r.getUTCSeconds()).slice(-2)+"."+String("00"+r.getUTCMilliseconds()).slice(-3)+'Z"';if(r.constructor===Array){for(f=0;f<r.length;f++)u.push(n.vakata.json.encode(r[f])||"null");return"["+u.join(",")+"]"}return n.each(r,function(t,r){if(n.isFunction(r))return!0;t=typeof t=="number"?'"'+t+'"':i(t);r=n.vakata.json.encode(r);u.push(t+":"+r)}),"{"+u.join(", ")+"}"}},decode:JSON&&JSON.parse?JSON.parse:function(t){return n.parseJSON(t)}}}(jQuery);a=document.createElement("I");a.className="jstree-icon jstree-checkbox";n.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0};n.jstree.plugins.checkbox=function(t,i){this.bind=function(){i.bind.call(this);this._data.checkbox.uto=!1;this.element.on("init.jstree",n.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible;this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked")},this)).on("loading.jstree",n.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this));if(this.settings.checkbox.three_state)this.element.on("changed.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",n.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto);this._data.checkbox.uto=setTimeout(n.proxy(this._undetermined,this),50)},this)).on("model.jstree",n.proxy(function(t,i){var f=this._model.data,u=f[i.parent],o=i.nodes,h=[],a,r,e,s,c,l;if(u.state.selected){for(r=0,e=o.length;r<e;r++)f[o[r]].state.selected=!0;this._data.core.selected=this._data.core.selected.concat(o)}else for(r=0,e=o.length;r<e;r++)if(f[o[r]].state.selected){for(s=0,c=f[o[r]].children_d.length;s<c;s++)f[f[o[r]].children_d[s]].state.selected=!0;this._data.core.selected=this._data.core.selected.concat(f[o[r]].children_d)}for(r=0,e=u.children_d.length;r<e;r++)f[u.children_d[r]].children.length||h.push(f[u.children_d[r]].parent);for(h=n.vakata.array_unique(h),s=0,c=h.length;s<c;s++)for(u=f[h[s]];u&&u.id!=="#";){for(a=0,r=0,e=u.children.length;r<e;r++)a+=f[u.children[r]].state.selected;if(a===e)u.state.selected=!0,this._data.core.selected.push(u.id),l=this.get_node(u,!0),l&&l.length&&l.children(".jstree-anchor").addClass("jstree-clicked");else break;u=this.get_node(u.parent)}this._data.core.selected=n.vakata.array_unique(this._data.core.selected)},this)).on("select_node.jstree",n.proxy(function(t,i){var f=i.node,h=this._model.data,r=this.get_node(f.parent),c=this.get_node(f,!0),u,e,s,o;for(this._data.core.selected=n.vakata.array_unique(this._data.core.selected.concat(f.children_d)),u=0,e=f.children_d.length;u<e;u++)h[f.children_d[u]].state.selected=!0;while(r&&r.id!=="#"){for(s=0,u=0,e=r.children.length;u<e;u++)s+=h[r.children[u]].state.selected;if(s===e)r.state.selected=!0,this._data.core.selected.push(r.id),o=this.get_node(r,!0),o&&o.length&&o.children(".jstree-anchor").addClass("jstree-clicked");else break;r=this.get_node(r.parent)}c.length&&c.find(".jstree-anchor").addClass("jstree-clicked")},this)).on("deselect_node.jstree",n.proxy(function(t,i){for(var u=i.node,o=this.get_node(u,!0),f,r=0,e=u.children_d.length;r<e;r++)this._model.data[u.children_d[r]].state.selected=!1;for(r=0,e=u.parents.length;r<e;r++)this._model.data[u.parents[r]].state.selected=!1,f=this.get_node(u.parents[r],!0),f&&f.length&&f.children(".jstree-anchor").removeClass("jstree-clicked");for(f=[],r=0,e=this._data.core.selected.length;r<e;r++)n.inArray(this._data.core.selected[r],u.children_d)===-1&&n.inArray(this._data.core.selected[r],u.parents)===-1&&f.push(this._data.core.selected[r]);this._data.core.selected=n.vakata.array_unique(f);o.length&&o.find(".jstree-anchor").removeClass("jstree-clicked")},this)).on("delete_node.jstree",n.proxy(function(n,t){for(var i=this.get_node(t.parent),o=this._model.data,r,f,e,u;i&&i.id!=="#";){for(e=0,r=0,f=i.children.length;r<f;r++)e+=o[i.children[r]].state.selected;if(e===f)i.state.selected=!0,this._data.core.selected.push(i.id),u=this.get_node(i,!0),u&&u.length&&u.children(".jstree-anchor").addClass("jstree-clicked");else break;i=this.get_node(i.parent)}},this)).on("move_node.jstree",n.proxy(function(t,i){var h=i.is_multi,c=i.old_parent,l=this.get_node(i.parent),s=this._model.data,r,e,f,o,u;if(!h)for(r=this.get_node(c);r&&r.id!=="#";){for(e=0,f=0,o=r.children.length;f<o;f++)e+=s[r.children[f]].state.selected;if(e===o)r.state.selected=!0,this._data.core.selected.push(r.id),u=this.get_node(r,!0),u&&u.length&&u.children(".jstree-anchor").addClass("jstree-clicked");else break;r=this.get_node(r.parent)}for(r=l;r&&r.id!=="#";){for(e=0,f=0,o=r.children.length;f<o;f++)e+=s[r.children[f]].state.selected;if(e===o)r.state.selected||(r.state.selected=!0,this._data.core.selected.push(r.id),u=this.get_node(r,!0),u&&u.length&&u.children(".jstree-anchor").addClass("jstree-clicked"));else if(r.state.selected)r.state.selected=!1,this._data.core.selected=n.vakata.array_remove_item(this._data.core.selected,r.id),u=this.get_node(r,!0),u&&u.length&&u.children(".jstree-anchor").removeClass("jstree-clicked");else break;r=this.get_node(r.parent)}},this))};this._undetermined=function(){for(var f=this._model.data,r=this._data.core.selected,i=[],e=this,t=0,u=r.length;t<u;t++)f[r[t]]&&f[r[t]].parents&&(i=i.concat(f[r[t]].parents));for(this.element.find(".jstree-closed").not(":has(ul)").each(function(){var n=e.get_node(this);!n.state.loaded&&n.original&&n.original.state&&n.original.state.undetermined&&n.original.state.undetermined===!0&&(i.push(n.id),i=i.concat(n.parents))}),i=n.vakata.array_unique(i),t=n.inArray("#",i),t!==-1&&(i=n.vakata.array_remove(i,t)),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),t=0,u=i.length;t<u;t++)f[i[t]].state.selected||(r=this.get_node(i[t],!0),r&&r.length&&r.children("a").children(".jstree-checkbox").addClass("jstree-undetermined"))};this.redraw_node=function(t,r,u){if(t=i.redraw_node.call(this,t,r,u),t){var f=t.getElementsByTagName("A")[0];f.insertBefore(a.cloneNode(),f.childNodes[0])}return!u&&this.settings.checkbox.three_state&&(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(n.proxy(this._undetermined,this),50)),t};this.activate_node=function(t,r){return(this.settings.checkbox.whole_node||n(r.target).hasClass("jstree-checkbox"))&&(r.ctrlKey=!0),i.activate_node.call(this,t,r)};this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0;this.element.children("ul").removeClass("jstree-no-checkboxes")};this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1;this.element.children("ul").addClass("jstree-no-checkboxes")};this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()}};n.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.create_node(r,{},"last",function(n){setTimeout(function(){i.edit(n)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.edit(r)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.is_selected(r)?i.delete_node(i.get_selected()):i.delete_node(r)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.is_selected(r)?i.cut(i.get_selected()):i.cut(r)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.is_selected(r)?i.copy(i.get_selected()):i.copy(r)}},paste:{separator_before:!1,icon:!1,_disabled:!this.can_paste(),separator_after:!1,label:"Paste",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.paste(r)}}}}}}};n.jstree.plugins.contextmenu=function(i,r){this.bind=function(){r.bind.call(this);this.element.on("contextmenu.jstree","a",n.proxy(function(n){n.preventDefault();this.is_loading(n.currentTarget)||this.show_contextmenu(n.currentTarget,n.pageX,n.pageY)},this)).on("click.jstree","a",n.proxy(function(){this._data.contextmenu.visible&&n.vakata.context.hide()},this));n(document).on("context_hide.vakata",n.proxy(function(){this._data.contextmenu.visible=!1},this))};this.teardown=function(){this._data.contextmenu.visible&&n.vakata.context.hide();r.teardown.call(this)};this.show_contextmenu=function(i,r,u){if(i=this.get_node(i),!i||i.id==="#")return!1;var o=this.settings.contextmenu,h=this.get_node(i,!0),s=h.children(".jstree-anchor"),e=!1,f=!1;(o.show_at_node||r===t||u===t)&&(e=s.offset(),r=e.left,u=e.top+this._data.core.li_height);this.settings.contextmenu.select_node&&!this.is_selected(i)&&(this.deselect_all(),this.select_node(i));f=o.items;n.isFunction(f)&&(f=f.call(this,i));n(document).one("context_show.vakata",n.proxy(function(t,i){var r="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";n(i.element).addClass(r)},this));this._data.contextmenu.visible=!0;n.vakata.context.show(s,{x:r,y:u},f);this.trigger("show_contextmenu",{node:i,x:r,y:u})}},function(n){var i=!1,t={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};n.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(i){n(document).triggerHandler("context_"+i+".vakata",{reference:t.reference,element:t.element,position:{x:t.position_x,y:t.position_y}})},_execute:function(n){return n=t.items[n],n&&!n._disabled&&n.action?n.action.call(null,{item:n,reference:t.reference,element:t.element,position:{x:t.position_x,y:t.position_y}}):!1},_parse:function(i,r){if(!i)return!1;r||(t.html="",t.items=[]);var u="",f=!1,e;return r&&(u+="<ul>"),n.each(i,function(i,r){if(!r)return!0;t.items.push(r);!f&&r.separator_before&&(u+="<li class='vakata-context-separator'><a href='#' "+(n.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;<\/a><\/li>");f=!1;u+="<li class='"+(r._class||"")+(r._disabled?" vakata-contextmenu-disabled ":"")+"'>";u+="<a href='#' rel='"+(t.items.length-1)+"'>";n.vakata.context.settings.icons&&(u+="<ins ",r.icon&&(u+=r.icon.indexOf("/")!==-1||r.icon.indexOf(".")!==-1?" style='background:url(\""+r.icon+"\") center center no-repeat' ":" class='"+r.icon+"' "),u+=">&#160;<\/ins><span>&#160;<\/span>");u+=r.label+"<\/a>";r.submenu&&(e=n.vakata.context._parse(r.submenu,!0),e&&(u+=e));u+="<\/li>";r.separator_after&&(u+="<li class='vakata-context-separator'><a href='#' "+(n.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;<\/a><\/li>",f=!0)}),u=u.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),r&&(u+="<\/ul>"),r||(t.html=u,n.vakata.context._trigger("parse")),u.length>10?u:!1},_show_submenu:function(t){if(t=n(t),t.length&&t.children("ul").length){var r=t.children("ul"),u=t.offset().left+t.outerWidth(),e=t.offset().top,f=r.width(),o=r.height(),s=n(window).width()+n(window).scrollLeft(),h=n(window).height()+n(window).scrollTop();i?t[u-(f+10+t.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):t[u+f+10>s?"addClass":"removeClass"]("vakata-context-right");e+o+10>h&&r.css("bottom","-1px");r.show()}},show:function(r,u,f){var h,o,e,s,c,l,a,v;t.element&&t.element.length&&t.element.width("");switch(!0){case!u&&!r:return!1;case!!u&&!!r:t.reference=r;t.position_x=u.x;t.position_y=u.y;break;case!u&&!!r:t.reference=r;h=r.offset();t.position_x=h.left+r.outerHeight();t.position_y=h.top;break;case!!u&&!r:t.position_x=u.x;t.position_y=u.y}!r||f||!n(r).data("vakata_contextmenu")||(f=n(r).data("vakata_contextmenu"));n.vakata.context._parse(f)&&t.element.html(t.html);t.items.length&&(o=t.element,e=t.position_x,s=t.position_y,c=o.width(),l=o.height(),a=n(window).width()+n(window).scrollLeft(),v=n(window).height()+n(window).scrollTop(),i&&(e-=o.outerWidth(),e<n(window).scrollLeft()+20&&(e=n(window).scrollLeft()+20)),e+c+20>a&&(e=a-(c+20)),s+l+20>v&&(s=v-(l+20)),t.element.css({left:e,top:s}).show().find("a:eq(0)").focus().parent().addClass("vakata-context-hover"),t.is_visible=!0,n.vakata.context._trigger("show"))},hide:function(){t.is_visible&&(t.element.hide().find("ul").hide().end().find(":focus").blur(),t.is_visible=!1,n.vakata.context._trigger("hide"))}};n(function(){i=n("body").css("direction")==="rtl";var r=!1;t.element=n("<ul class='vakata-context'><\/ul>");t.element.on("mouseenter","li",function(i){(i.stopImmediatePropagation(),n.contains(this,i.relatedTarget))||(r&&clearTimeout(r),t.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),n(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),n.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){n.contains(this,t.relatedTarget)||n(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(){n(this).find(".vakata-context-hover").removeClass("vakata-context-hover");n.vakata.context.settings.hide_onmouseleave&&(r=setTimeout(function(){return function(){n.vakata.context.hide()}}(this),n.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(n){n.preventDefault()}).on("mouseup","a",function(){n(this).blur().parent().hasClass("vakata-context-disabled")||n.vakata.context._execute(n(this).attr("rel"))===!1||n.vakata.context.hide()}).on("keydown","a",function(i){var r=null;switch(i.which){case 13:case 32:i.type="mouseup";i.preventDefault();n(i.currentTarget).trigger(i);break;case 37:t.is_visible&&(t.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),i.stopImmediatePropagation(),i.preventDefault());break;case 38:t.is_visible&&(r=t.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),r.length||(r=t.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),r.addClass("vakata-context-hover").children("a").focus(),i.stopImmediatePropagation(),i.preventDefault());break;case 39:t.is_visible&&(t.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),i.stopImmediatePropagation(),i.preventDefault());break;case 40:t.is_visible&&(r=t.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),r.length||(r=t.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),r.addClass("vakata-context-hover").children("a").focus(),i.stopImmediatePropagation(),i.preventDefault());break;case 27:n.vakata.context.hide();i.preventDefault()}}).appendTo("body");n(document).on("mousedown",function(i){t.is_visible&&!n.contains(t.element[0],i.target)&&n.vakata.context.hide()}).on("context_show.vakata",function(){t.element.find("li:has(ul)").children("a").addClass("vakata-context-parent");i&&t.element.addClass("vakata-context-rtl").css("direction","rtl");t.element.find("ul").hide().end()})})}(n);n.jstree.defaults.dnd={copy:!0,open_timeout:500};n.jstree.plugins.dnd=function(t,i){this.bind=function(){i.bind.call(this);this.element.on("mousedown","a",n.proxy(function(t){var i=this.get_node(t.target),r=this.is_selected(i)?this.get_selected().length:1;if(i&&i.id&&i.id!=="#"&&t.which===1)return this.element.trigger("mousedown.jstree"),n.vakata.dnd.start(t,{jstree:!0,origin:this,obj:this.get_node(i,!0),nodes:r>1?this.get_selected():[i.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+'"><i class="jstree-icon jstree-er"><\/i>'+(r>1?r+" "+this.get_string("nodes"):this.get_text(t.currentTarget,!0))+'<ins class="jstree-copy" style="display:none;">+<\/ins><\/div>')},this))}};n(function(){var t=!1,r=!1,i=n('<div id="jstree-marker">&#160;<\/div>').hide().appendTo("body");n(document).bind("dnd_start.vakata",function(){t=!1}).bind("dnd_move.vakata",function(u,f){if((r&&clearTimeout(r),f.data.jstree)&&(!f.event.target.id||f.event.target.id!=="jstree-marker")){var e=n.jstree.reference(f.event.target),o=!1,c=!1,y=!1,p,w,l,a,v,b,s,h,k,g,d,nt;if(e&&e._data&&e._data.dnd)if(i.attr("class","jstree-"+e.get_theme()),f.helper.children().attr("class","jstree-"+e.get_theme()).find(".jstree-copy:eq(0)")[f.data.origin&&f.data.origin.settings.dnd.copy&&(f.event.metaKey||f.event.ctrlKey)?"show":"hide"](),(f.event.target===e.element[0]||f.event.target===e.get_container_ul()[0])&&e.get_container_ul().children().length===0){for(s=!0,h=0,k=f.data.nodes.length;h<k;h++)if(s=s&&e.check(f.data.origin&&f.data.origin.settings.dnd.copy&&(f.event.metaKey||f.event.ctrlKey)?"copy_node":"move_node",f.data.nodes[h],"#","last"),!s)break;if(s){t={ins:e,par:"#",pos:"last"};i.hide();f.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok");return}}else if(o=n(f.event.target).closest("a"),o&&o.length&&o.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(c=o.offset(),y=f.event.pageY-c.top,l=o.height(),b=y<l/3?["b","i","a"]:y>l-l/3?["a","i","b"]:y>l/2?["i","a","b"]:["i","b","a"],n.each(b,function(u,y){switch(y){case"b":p=c.left-6;w=c.top-5;a=e.get_parent(o);v=o.parent().index();break;case"i":p=c.left-2;w=c.top-5+l/2+1;a=o.parent();v=0;break;case"a":p=c.left-6;w=c.top-5+l;a=e.get_parent(o);v=o.parent().index()+1}
/*!
								// TODO: moving inside, but the node is not yet loaded?
								// the check will work anyway, as when moving the node will be loaded first and checked again
								if(v === 'i' && !ins.is_loaded(p)) { }
								*/
for(s=!0,h=0,k=f.data.nodes.length;h<k;h++)if(g=f.data.origin&&f.data.origin.settings.dnd.copy&&(f.event.metaKey||f.event.ctrlKey)?"copy_node":"move_node",d=v,g==="move_node"&&y==="a"&&f.data.origin&&f.data.origin===e&&a===e.get_parent(f.data.nodes[h])&&(nt=e.get_node(a),d>n.inArray(f.data.nodes[h],nt.children)&&(d-=1)),s=s&&e.check(g,f.data.nodes[h],a,d),!s)break;if(s)return y==="i"&&o.parent().is(".jstree-closed")&&e.settings.dnd.open_timeout&&(r=setTimeout(function(n,t){return function(){n.open_node(t)}}(e,o),e.settings.dnd.open_timeout)),t={ins:e,par:a,pos:v},i.css({left:p+"px",top:w+"px"}).show(),f.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok"),b=!0,!1}),b===!0))return;t=!1;f.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er");i.hide()}}).bind("dnd_scroll.vakata",function(n,r){r.data.jstree&&(i.hide(),t=!1,r.helper.find(".jstree-icon:eq(0)").removeClass("jstree-ok").addClass("jstree-er"))}).bind("dnd_stop.vakata",function(n,u){if((r&&clearTimeout(r),u.data.jstree)&&(i.hide(),t)){for(var o=[],f=0,e=u.data.nodes.length;f<e;f++)o[f]=u.data.origin?u.data.origin.get_node(u.data.nodes[f]):u.data.nodes[f];t.ins[u.data.origin&&u.data.origin.settings.dnd.copy&&(u.event.metaKey||u.event.ctrlKey)?"copy_node":"move_node"](o,t.par,t.pos)}}).bind("keyup keydown",function(t,i){i=n.vakata.dnd._get();i.data&&i.data.jstree&&i.helper.find(".jstree-copy:eq(0)")[i.data.origin&&i.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey)?"show":"hide"]()})}),function(n){n.fn.vakata_reverse=[].reverse;var t={element:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1};n.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5},_trigger:function(t,i){var r=n.vakata.dnd._get();r.event=i;n(document).triggerHandler("dnd_"+t+".vakata",r)},_get:function(){return{data:t.data,element:t.element,helper:t.helper}},_clean:function(){t.helper&&t.helper.remove();t.scroll_i&&(clearInterval(t.scroll_i),t.scroll_i=!1);t={element:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1};n(document).unbind("mousemove",n.vakata.dnd.drag);n(document).unbind("mouseup",n.vakata.dnd.stop)},_scroll:function(i){if(!t.scroll_e||!t.scroll_l&&!t.scroll_t)return t.scroll_i&&(clearInterval(t.scroll_i),t.scroll_i=!1),!1;if(!t.scroll_i)return t.scroll_i=setInterval(n.vakata.dnd._scroll,100),!1;if(i===!0)return!1;var r=t.scroll_e.scrollTop(),u=t.scroll_e.scrollLeft();t.scroll_e.scrollTop(r+t.scroll_t*n.vakata.dnd.settings.scroll_speed);t.scroll_e.scrollLeft(u+t.scroll_l*n.vakata.dnd.settings.scroll_speed);(r!==t.scroll_e.scrollTop()||u!==t.scroll_e.scrollLeft())&&n.vakata.dnd._trigger("scroll",t.scroll_e)},start:function(i,r,u){t.is_drag&&n.vakata.dnd.stop({});try{i.currentTarget.unselectable="on";i.currentTarget.onselectstart=function(){return!1};i.currentTarget.style&&(i.currentTarget.style.MozUserSelect="none")}catch(f){}return t.init_x=i.pageX,t.init_y=i.pageY,t.data=r,t.is_down=!0,t.element=i.currentTarget,u!==!1&&(t.helper=n("<div id='vakata-dnd'><\/div>").html(u).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),n(document).bind("mousemove",n.vakata.dnd.drag),n(document).bind("mouseup",n.vakata.dnd.stop),!1},drag:function(i){if(t.is_down){if(!t.is_drag)if(Math.abs(i.pageX-t.init_x)>n.vakata.dnd.settings.threshold||Math.abs(i.pageY-t.init_y)>n.vakata.dnd.settings.threshold)t.helper&&(t.helper.appendTo("body"),t.helper_w=t.helper.outerWidth()),t.is_drag=!0,n.vakata.dnd._trigger("start",i);else return;var r=!1,c=!1,u=!1,e=!1,f=!1,o=!1,l=!1,a=!1,s=!1,h=!1;t.scroll_t=0;t.scroll_l=0;t.scroll_e=!1;n(i.target).parentsUntil("body").addBack().vakata_reverse().filter(function(){return/^auto|scroll$/.test(n(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var u=n(this),r=u.offset();return this.scrollHeight>this.offsetHeight&&(r.top+u.height()-i.pageY<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=1),i.pageY-r.top<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(r.left+u.width()-i.pageX<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=1),i.pageX-r.left<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=-1)),t.scroll_t||t.scroll_l?(t.scroll_e=n(this),!1):void 0});t.scroll_e||(r=n(document),c=n(window),u=r.height(),e=c.height(),f=r.width(),o=c.width(),l=r.scrollTop(),a=r.scrollLeft(),u>e&&i.pageY-l<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=-1),u>e&&e-(i.pageY-l)<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=1),f>o&&i.pageX-a<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=-1),f>o&&o-(i.pageX-a)<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=1),(t.scroll_t||t.scroll_l)&&(t.scroll_e=r));t.scroll_e&&n.vakata.dnd._scroll(!0);t.helper&&(s=parseInt(i.pageY+n.vakata.dnd.settings.helper_top,10),h=parseInt(i.pageX+n.vakata.dnd.settings.helper_left,10),u&&s+25>u&&(s=u-50),f&&h+t.helper_w>f&&(h=f-(t.helper_w+2)),t.helper.css({left:h+"px",top:s+"px"}));n.vakata.dnd._trigger("move",i)}},stop:function(i){t.is_drag&&n.vakata.dnd._trigger("stop",i);n.vakata.dnd._clean()}}}(jQuery);n.jstree.defaults.search={ajax:!1,fuzzy:!0,case_sensitive:!1,show_only_matches:!1,close_opened_onclear:!0};n.jstree.plugins.search=function(t,i){this.bind=function(){if(i.bind.call(this),this._data.search.str="",this._data.search.dom=n(),this._data.search.res=[],this._data.search.opn=[],this.settings.search.show_only_matches)this.element.on("search.jstree",function(t,i){i.nodes.length&&(n(this).find("li").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),i.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){n(this).children("li:visible").eq(-1).addClass("jstree-last")}))}).on("clear_search.jstree",function(t,i){i.nodes.length&&n(this).find("li").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")})};this.search=function(t,i){if(t===!1||n.trim(t)==="")return this.clear_search();var r=this.settings.search,o=r.ajax?n.extend({},r.ajax):!1,u=null,f=[],e=[],s,h;if(this._data.search.res.length&&this.clear_search(),!i&&o!==!1)return o.data||(o.data={}),o.data.str=t,n.ajax(r.ajax).done(n.proxy(function(n){this._search_load(n,t)},this));if(this._data.search.str=t,this._data.search.dom=n(),this._data.search.res=[],this._data.search.opn=[],u=new n.vakata.search(t,!0,{caseSensitive:r.case_sensitive,fuzzy:r.fuzzy}),n.each(this._model.data,function(n,t){t.text&&u.search(t.text).isMatch&&(f.push(n),e=e.concat(t.parents))}),f.length){for(e=n.vakata.array_unique(e),this._search_open(e),s=0,h=f.length;s<h;s++)u=this.get_node(f[s],!0),u&&(this._data.search.dom=this._data.search.dom.add(u));this._data.search.res=f;this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:t,res:this._data.search.res})};this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search");this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn);this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res});this._data.search.str="";this._data.search.res=[];this._data.search.opn=[];this._data.search.dom=n()};this._search_open=function(t){var i=this;n.each(t.concat([]),function(n,r){r=document.getElementById(r);r&&i.is_closed(r)&&(i._data.search.opn.push(r.id),i.open_node(r,function(){i._search_open(t)}))})};this._search_load=function(t,i){var u=!0,r=this,f=r._model.data;n.each(t.concat([]),function(n,e){f[e]&&(f[e].state.loaded||(r.load_node(e,function(){r._search_load(t,i)}),u=!1))});u&&this.search(i,!0)}},function(n){n.vakata.search=function(n,t,i){i=i||{};i.fuzzy!==!1&&(i.fuzzy=!0);n=i.caseSensitive?n:n.toLowerCase();var u=i.location||0,o=i.distance||100,c=i.threshold||.6,r=n.length,s,h,f,e;return r>32&&(i.fuzzy=!1),i.fuzzy&&(s=1<<r-1,h=function(){for(var i={},t=0,t=0;t<r;t++)i[n.charAt(t)]=0;for(t=0;t<r;t++)i[n.charAt(t)]|=1<<r-t-1;return i}(),f=function(n,t){var i=n/r,f=Math.abs(u-t);return o?i+f/o:f?1:i}),e=function(t){if(t=i.caseSensitive?t:t.toLowerCase(),n===t||t.indexOf(n)!==-1)return{isMatch:!0,score:0};if(!i.fuzzy)return{isMatch:!1,score:1};var a,e,tt=t.length,v=c,o=t.indexOf(n,u),p,l,w=r+tt,b,g,k,y,nt,d=1,it=[];for(o!==-1&&(v=Math.min(f(0,o),v),o=t.lastIndexOf(n,u+r),o!==-1&&(v=Math.min(f(0,o),v))),o=-1,a=0;a<r;a++){for(p=0,l=w;p<l;)f(a,u+l)<=v?p=l:w=l,l=Math.floor((w-p)/2+p);for(w=l,g=Math.max(1,u-l+1),k=Math.min(u+l,tt)+r,y=new Array(k+2),y[k+1]=(1<<a)-1,e=k;e>=g;e--)if(nt=h[t.charAt(e-1)],y[e]=a===0?(y[e+1]<<1|1)&nt:(y[e+1]<<1|1)&nt|(b[e+1]|b[e])<<1|1|b[e+1],y[e]&s&&(d=f(a,e-1),d<=v))if(v=d,o=e-1,it.push(o),o>u)g=Math.max(1,2*u-o);else break;if(f(a+1,u)>v)break;b=y}return{isMatch:o>=0,score:d}},t===!0?{search:e}:e(t)}}(jQuery);n.jstree.defaults.sort=function(n,t){return this.get_text(n)>this.get_text(t)?1:-1};n.jstree.plugins.sort=function(t,i){this.bind=function(){i.bind.call(this);this.element.on("model.jstree",n.proxy(function(n,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",n.proxy(function(n,t){this.sort(t.parent||t.node.parent,!1);this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",n.proxy(function(n,t){this.sort(t.parent,!1);this.redraw_node(t.parent,!0)},this))};this.sort=function(t,i){var r,u;if(t=this.get_node(t),t&&t.children&&t.children.length&&(t.children.sort(n.proxy(this.settings.sort,this)),i))for(r=0,u=t.children_d.length;r<u;r++)this.sort(t.children_d[r],!1)}};c=!1;n.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree",ttl:!1};n.jstree.plugins.state=function(t,i){this.bind=function(){i.bind.call(this);this.element.on("ready.jstree",n.proxy(function(){this.element.one("restore_state.jstree set_state.jstree",n.proxy(function(){this.element.on(this.settings.state.events,n.proxy(function(){c&&clearTimeout(c);c=setTimeout(n.proxy(function(){this.save_state()},this),100)},this))},this));this.restore_state()},this))};this.save_state=function(){n.vakata.storage.set(this.settings.state.key,this.get_state(),this.settings.state.ttl)};this.restore_state=function(){var t=n.vakata.storage.get(this.settings.state.key);!t||this.set_state(t);this.trigger("restore_state",{state:t})};this.clear_state=function(){return n.vakata.storage.del(this.settings.state.key)}},function(n,t,i){var u=function(n){return n},f=function(n){return decodeURIComponent(n.replace(/\+/g," "))},r=n.vakata.cookie=function(e,o,s){var p,c,l,a,h,w,v,y;if(o!==i)return s=n.extend({},r.defaults,s),o===null&&(s.expires=-1),typeof s.expires=="number"&&(p=s.expires,c=s.expires=new Date,c.setDate(c.getDate()+p)),o=r.json?n.vakata.json.encode(o):String(o),o=[encodeURIComponent(e),"=",r.raw?o:encodeURIComponent(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join(""),t.cookie=o,o;for(l=r.raw?u:f,a=t.cookie.split("; "),h=0,w=a.length;h<w;h++)if(v=a[h].split("="),l(v.shift())===e)return y=l(v.join("=")),r.json?n.vakata.json.decode(y):y;return null};r.defaults={};n.vakata.removeCookie=function(t,i){return n.vakata.cookie(t)!==null?(n.vakata.cookie(t,null,i),!0):!1}}(jQuery,document),function(n,t){function v(){if(r.jStorage)try{i=a(String(r.jStorage))}catch(n){r.jStorage="{}"}else r.jStorage="{}";s=r.jStorage?String(r.jStorage).length:0}function e(){try{r.jStorage=l(i);f==="userDataBehavior"&&(u.setAttribute("jStorage",r.jStorage),u.save("jStorage"));f==="cookie"&&n.vakata.cookie("__vjstorage",r.jStorage,{expires:365});s=r.jStorage?String(r.jStorage).length:0}catch(t){
/*! probably cache is full, nothing is saved this way*/
}}function o(n){if(!n||typeof n!="string"&&typeof n!="number")throw new TypeError("Key name must be string or numeric");if(n==="__jstorage_meta")throw new TypeError("Reserved key name");return!0}function c(){var u=+new Date,n,t,r=Infinity,f=!1;if(h!==!1&&clearTimeout(h),i.__jstorage_meta&&typeof i.__jstorage_meta.TTL=="object"){t=i.__jstorage_meta.TTL;for(n in t)t.hasOwnProperty(n)&&(t[n]<=u?(delete t[n],delete i[n],f=!0):t[n]<r&&(r=t[n]));r!==Infinity&&(h=setTimeout(c,r-u));f&&e()}}function y(){var i=!1,t;if(Object.prototype.hasOwnProperty.call(window,"localStorage"))try{window.localStorage.setItem("_tmptest","tmpval");i=!0;window.localStorage.removeItem("_tmptest")}catch(e){}if(i)try{window.localStorage&&(r=window.localStorage,f="localStorage")}catch(e){
/*! Firefox fails when touching localStorage and cookies are disabled */
}else if(Object.prototype.hasOwnProperty.call(window,"globalStorage"))try{window.globalStorage&&(r=window.globalStorage[window.location.hostname],f="globalStorage")}catch(e){
/*! Firefox fails when touching localStorage and cookies are disabled */
}else{if(u=document.createElement("link"),u.addBehavior){u.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(u);try{u.load("jStorage");t="{}";t=u.getAttribute("jStorage");r.jStorage=t;f="userDataBehavior"}catch(e){}}if(f||!n.vakata.cookie("__vjstorage")&&(!n.vakata.cookie("__vjstorage","{}",{expires:365})||n.vakata.cookie("__vjstorage")!=="{}")||(u=null,r.jStorage=n.vakata.cookie("__vjstorage"),f="cookie"),!f){u=null;return}}v();c()}var i={},r={jStorage:"{}"},u=null,s=0,l=n.vakata.json.encode,a=n.vakata.json.decode,f=!1,h=!1;
/*!
			Variable: $.vakata.storage
			*object* holds all storage related functions and properties.
		*/
n.vakata.storage={version:"0.3.0",set:function(t,r,u){return o(t),typeof r=="object"&&(r=a(l(r))),i[t]=r,e(),u&&parseInt(u,10)&&n.vakata.storage.setTTL(t,parseInt(u,10)),r},get:function(n,r){return(o(n),i.hasOwnProperty(n))?i[n]:r===t?null:r},del:function(n){return(o(n),i.hasOwnProperty(n))?(delete i[n],i.__jstorage_meta&&typeof i.__jstorage_meta.TTL=="object"&&i.__jstorage_meta.TTL.hasOwnProperty(n)&&delete i.__jstorage_meta.TTL[n],e(),!0):!1},setTTL:function(n,t){var r=+new Date;return(o(n),t=Number(t)||0,i.hasOwnProperty(n))?(i.__jstorage_meta||(i.__jstorage_meta={}),i.__jstorage_meta.TTL||(i.__jstorage_meta.TTL={}),t>0?i.__jstorage_meta.TTL[n]=r+t:delete i.__jstorage_meta.TTL[n],e(),c(),!0):!1},getTTL:function(n){var r=+new Date,t;return(o(n),i.hasOwnProperty(n)&&i.__jstorage_meta.TTL&&i.__jstorage_meta.TTL[n])?(t=i.__jstorage_meta.TTL[n]-r,t||0):0},flush:function(){return i={},e(),!0},storageObj:function(){return n.extend(!0,{},i)},index:function(){var t=[];return n.each(i,function(n){n!=="__jstorage_meta"&&t.push(n)}),t},storageSize:function(){return s},currentBackend:function(){return f},storageAvailable:function(){return!!f}};y()}(jQuery);n.jstree.defaults.types={"#":{},"default":{}};n.jstree.plugins.types=function(i,r){this.init=function(n,t){r.init.call(this,n,t);this._model.data["#"].type="#"};this.bind=function(){r.bind.call(this);this.element.on("model.jstree",n.proxy(function(n,t){for(var u=this._model.data,r=t.nodes,e=this.settings.types,f="default",i=0,o=r.length;i<o;i++)f="default",u[r[i]].original&&u[r[i]].original.type&&e[u[r[i]].original.type]&&(f=u[r[i]].original.type),u[r[i]].data&&u[r[i]].data.jstree&&u[r[i]].data.jstree.type&&e[u[r[i]].data.jstree.type]&&(f=u[r[i]].data.jstree.type),u[r[i]].type=f,u[r[i]].icon===!0&&e[f].icon&&(u[r[i]].icon=e[f].icon)},this))};this.get_json=function(t,i){var f,o,e=this._model.data,u=r.get_json.call(this,t,i);if(u===!1)return!1;if(n.isArray(u))for(f=0,o=u.length;f<o;f++)u[f].type=u[f].id&&e[u[f].id]&&e[u[f].id].type?e[u[f].id].type:"default";else u.type=u.id&&e[u.id]&&e[u.id].type?e[u.id].type:"default";return u};this.check=function(i,u,f,e){if(r.check.call(this,i,u,f,e)===!1)return!1;u=u&&u.id?u:this.get_node(u);f=f&&f.id?f:this.get_node(f);var l=this._model.data,o,s,h,c;switch(i){case"create_node":case"move_node":case"copy_node":if(i!=="move_node"||n.inArray(u.id,f.children)===-1){if((o=this.get_rules(f),o.max_children!==t&&o.max_children!==-1&&o.max_children===f.children.length)||o.valid_children!==t&&o.valid_children!==-1&&n.inArray(u.type,o.valid_children)===-1)return!1;if(u.children_d&&u.parents){for(s=0,h=0,c=u.children_d.length;h<c;h++)s=Math.max(s,l[u.children_d[h]].parents.length);s=s-u.parents.length+1}s<=0&&(s=1);do{if(o.max_depth!==t&&o.max_depth!==-1&&o.max_depth<s)return!1;f=this.get_node(f.parent);o=this.get_rules(f);s++}while(f)}}return!0};this.get_rules=function(n){if(n=this.get_node(n),!n)return!1;var i=this.get_type(n,!0);return i.max_depth===t&&(i.max_depth=-1),i.max_children===t&&(i.max_children=-1),i.valid_children===t&&(i.valid_children=-1),i};this.get_type=function(t,i){return t=this.get_node(t),t?i?n.extend({type:t.type},this.settings.types[t.type]):t.type:!1};this.set_type=function(t,i){var r,u,o,f,e;if(n.isArray(t)){for(t=t.slice(),u=0,o=t.length;u<o;u++)this.set_type(t[u],i);return!0}return(r=this.settings.types,t=this.get_node(t),!r[i]||!t)?!1:(f=t.type,e=this.get_icon(t),t.type=i,(e===!0||r[f]&&r[f].icon&&e===r[f].icon)&&this.set_icon(t,r[i].icon||!0),!0)}};n.jstree.plugins.unique=function(t,i){this.check=function(t,r,u,f){if(i.check.call(this,t,r,u,f)===!1)return!1;if(r=r&&r.id?r:this.get_node(r),u=u&&u.id?u:this.get_node(u),!u||!u.children)return!0;for(var s=t==="rename_node"?f:r.text,o=[],c=this._model.data,e=0,h=u.children.length;e<h;e++)o.push(c[u.children[e]].text);switch(t){case"delete_node":return!0;case"rename_node":case"copy_node":return n.inArray(s,o)===-1;case"move_node":return r.parent===u.id||n.inArray(s,o)===-1}return!0}};f=document.createElement("DIV");f.setAttribute("unselectable","on");f.className="jstree-wholerow";f.innerHTML="&#160;";n.jstree.plugins.wholerow=function(t,i){this.bind=function(){i.bind.call(this);this.element.on("loading",n.proxy(function(){f.style.height=this._data.core.li_height+"px"},this)).on("ready.jstree set_state.jstree",n.proxy(function(){this.hide_dots()},this)).on("ready.jstree",n.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",n.proxy(function(){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",n.proxy(function(n,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");for(var i=!1,r=0,u=t.selected.length;r<u;r++)i=this.get_node(t.selected[r],!0),i&&i.length&&i.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",n.proxy(function(n,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",n.proxy(function(t,i){this.element.find(".jstree-wholerow-hovered").removeClass("jstree-wholerow-hovered");t.type==="hover_node"&&this.get_node(i.node,!0).each(function(){n(this).children(".jstree-wholerow").addClass("jstree-wholerow-hovered")})},this)).on("contextmenu.jstree",".jstree-wholerow",n.proxy(function(t){t.preventDefault();n(t.currentTarget).closest("li").children("a:eq(0)").trigger("contextmenu",t)},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=n.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});n(t.currentTarget).closest("li").children("a:eq(0)").trigger(i).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",n.proxy(function(t){t.stopImmediatePropagation();var i=n.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});n(t.currentTarget).closest("li").children("a:eq(0)").trigger(i).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",n.proxy(function(n){return n.stopImmediatePropagation(),this.hover_node(n.currentTarget),!1},this)).on("mouseleave.jstree","li",n.proxy(function(n){this.dehover_node(n.currentTarget)},this))};this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove();i.teardown.call(this)};this.redraw_node=function(t,r,u){if(t=i.redraw_node.call(this,t,r,u),t){var e=f.cloneNode(!0);n.inArray(t.id,this._data.core.selected)!==-1&&(e.className+=" jstree-wholerow-clicked");t.insertBefore(e,t.childNodes[0])}return t}}}});
//# sourceMappingURL=jstree.min.js.map
